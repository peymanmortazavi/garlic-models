<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>Garlic Model: Module Parsing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygenextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="topbanner"><a href="https://github.com/peymanmortazavi/garlic-models" title="Garlic Model GitHub"><i class="githublogo"></i></a></div>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__home_runner_work_garlic-models_garlic-models_docs_pages_ModuleParsing.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Module Parsing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>While there are plans to support JSON Schema and some other formats so we are not reinventing the wheel and provide yet another format to learn for model definitions. For those who prefer, there is this format which some might find more intuitive to write.</p>
<p>This is still a work in progress but it is slowly taking shape.</p>
<p>In this document we use YAML to describe the format but you can use any data container.</p>
<p>Every module consists of fields and models. Fields are parsed before models regardless of the order of fields in the module descriptor file.</p>
<p>Every field can either be an alias to another field (string) or define a Field structure (object).</p>
<div class="fragment"><div class="line">fields:</div>
<div class="line">    FieldNameWithoutSpaces:</div>
<div class="line">        meta:</div>
<div class="line">            key1: value1</div>
<div class="line">            key2: value2</div>
<div class="line">        message: &quot;This automatically ends up in the meta if defined.&quot;</div>
<div class="line">        constraints: []  # empty constraints</div>
<div class="line"> </div>
<div class="line">    AnotherField:</div>
<div class="line">        type: FieldNameWithoutSpaces  # inherit all constraints from this field.</div>
<div class="line">        label: &quot;Another Field&quot;  # this goes to meta if defined.</div>
<div class="line">        constraints:  # additional constraints</div>
<div class="line">            - type: regex</div>
<div class="line">              pattern: &quot;your regex pattern here&quot;</div>
<div class="line">              name: &quot;my_constraint&quot;  # optional</div>
<div class="line">              message: &quot;My Custom Message&quot;  # optional</div>
<div class="line">              fatal: true  # also optional and defaults to false for regex</div>
<div class="line"> </div>
<div class="line">    DifferentName: AnotherField  # just an alias for AnotherField</div>
</div><!-- fragment --><p>Models are defined in a somewhat similar format. Each model can define <code>fields</code> which is an object whose keys become field names and values become field descriptors. Either directly referring to a defined field by its name in the module or making an anonymous field in-place.</p>
<div class="fragment"><div class="line">models:</div>
<div class="line">    ModelNameWithoutSpaces:</div>
<div class="line">        meta:</div>
<div class="line">            key1: value1</div>
<div class="line">            key2: value2</div>
<div class="line">        description: &quot;brief description&quot;  # this goes into meta if defined.</div>
<div class="line">        fields:</div>
<div class="line">            username: DifferentName</div>
<div class="line">            alternative_name: DifferentName?</div>
<div class="line">            anonymous_field:</div>
<div class="line">                type: string</div>
<div class="line">                optional: true  # defaults to false</div>
<div class="line">                constraints: [{type: range, min: 10, max: 25}]</div>
</div><!-- fragment --><p>As seen in the example above, you can refer to already defined fields like <code>username</code> key that uses <code>DifferentName</code> defined earlier in the file. If you end the field name by <code>?</code> it makes that field optional.</p>
<p>Alternatively, you can define an anonymous field.</p>
<blockquote class="doxtable">
<p><b>NOTE</b> Every module has <b>string</b>, <b>integer</b>, <b>double</b>, <b>bool</b>, <b>list</b>, <b>object</b> and <b>null</b> as fields by default. </p>
</blockquote>
<dl class="section attention"><dt>Attention</dt><dd>You cannot override fields and models.</dd></dl>
<h2><a class="anchor" id="autotoc_md21"></a>
Automatic Fields</h2>
<blockquote class="doxtable">
<p>Every model defined in the module automatically creates a field by the same name as the model. </p>
</blockquote>
<div class="fragment"><div class="line">models:</div>
<div class="line">    User:</div>
<div class="line">        fields:</div>
<div class="line">            name: string</div>
<div class="line">            age: integer</div>
<div class="line">    </div>
<div class="line">    Group:</div>
<div class="line">        fields:</div>
<div class="line">            name: string</div>
<div class="line">            users:</div>
<div class="line">                constraints: [{type: list, of: User}]  # refers to User</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md22"></a>
Deferred Fields</h2>
<p>It is possible to use a field even prior to its definition so long as it gets defined somewhere in the module.</p>
<p>For example, we can improve the previous example by the following definition:</p>
<div class="fragment"><div class="line">fields:</div>
<div class="line">    UserList:</div>
<div class="line">        constraints: [{type: list, of: User}]  # User is not defined yet but it will be.</div>
<div class="line"> </div>
<div class="line">models:</div>
<div class="line">    User:</div>
<div class="line">        fields:</div>
<div class="line">            name: string</div>
<div class="line">            age: integer</div>
<div class="line"> </div>
<div class="line">    Group:</div>
<div class="line">        fields:</div>
<div class="line">            name: string</div>
<div class="line">            users: UserList</div>
</div><!-- fragment --><p>This is the same for aliases, you can make a field alias for a field that is not defined yet.</p>
<h2><a class="anchor" id="autotoc_md23"></a>
Model Inheritance</h2>
<p>Models can inherit from one another. You can either inherit from one model or a series of models.</p>
<div class="fragment"><div class="line">models:</div>
<div class="line">    User:</div>
<div class="line">        fields:</div>
<div class="line">            name: string</div>
<div class="line"> </div>
<div class="line">    AdminUser:</div>
<div class="line">        inherit: User</div>
<div class="line">        fields:</div>
<div class="line">            level: integer</div>
<div class="line"> </div>
<div class="line">    GroupMembership:</div>
<div class="line">        fields:</div>
<div class="line">            group: string</div>
<div class="line"> </div>
<div class="line">    GroupAdmin:</div>
<div class="line">        inherit: [GroupMembership, AdminUser]</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md24"></a>
Exclude some fields</h3>
<p>You may exclude some fields from getting inherited.</p>
<div class="fragment"><div class="line">models:</div>
<div class="line">    User:</div>
<div class="line">        fields:</div>
<div class="line">            name: string</div>
<div class="line">            password: string</div>
<div class="line"> </div>
<div class="line">    UserInfo:</div>
<div class="line">        inherit: User</div>
<div class="line">        exclude_fields: [password]</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25"></a>
Override fields</h3>
<p>If a model defines a field, that will override the inheritance.</p>
<div class="fragment"><div class="line">models:</div>
<div class="line">    User:</div>
<div class="line">        fields:</div>
<div class="line">            name: string</div>
<div class="line">            age: integer</div>
<div class="line"> </div>
<div class="line">    YoungUser:</div>
<div class="line">        inherit: User</div>
<div class="line">        fields:</div>
<div class="line">            age:</div>
<div class="line">                constraints: [integer, {type: range, min: 5, max: 18}]</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md26"></a>
ATTENTION</h2>
<p>This format is very tentative and is still work in progress. There might be a change in the structure so that fields don't have be explicitly under fields.</p>
<div class="fragment"><div class="line">models:</div>
<div class="line">    User:</div>
<div class="line">        @meta:</div>
<div class="line">            key1: value1</div>
<div class="line">        @inherit: []</div>
<div class="line">        @exclude_fields: []</div>
<div class="line">        name: string</div>
<div class="line">        age: integer</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
  </ul>
</div>
</body>
</html>
